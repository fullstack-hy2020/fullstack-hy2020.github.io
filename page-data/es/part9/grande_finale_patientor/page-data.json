{"componentChunkName":"component---src-templates-content-template-js","path":"/es/part9/grande_finale_patientor","result":{"data":{"markdownRemark":{"html":"<div class=\"content\">\n<h3>Trabajando con una base de código existente</h3>\n<p>Al sumergirse en una base de código existente por primera vez, es bueno obtener una visión general de las convenciones y la estructura del proyecto. Puedes comenzar tu investigación leyendo el <em>README.md</em> en la raíz del repositorio. Por lo general, el archivo <em>README.md</em> contiene una breve descripción de la aplicación y los requisitos para usarla, así como las instrucciones para iniciarla en el modo de desarrollo.\nSi el README no está disponible o alguien ha \"ahorrado tiempo\" y lo ha dejado como código auxiliar, puedes echar un vistazo al <em>package.json</em>.\nSiempre es una buena idea iniciar la aplicación y hacer clic para verificar que tiene un entorno de desarrollo funcional.</p>\n<p>También puedes examinar la estructura de carpetas para obtener información sobre la funcionalidad de la aplicación y/o la arquitectura utilizada. Estos no siempre son claros y es posible que los desarrolladores hayan elegido una forma de organizar el código que no le resulte familiar. El <a href=\"https://github.com/fullstack-hy2020/patientor\">proyecto de muestra</a> utilizado en el resto de esta parte está organizado por funcionalidad. Puedes ver qué páginas tiene la aplicación y algunos componentes generales, por ejemplo, modales y estado. Ten en cuenta que las funcionalidades pueden tener diferentes alcances. Por ejemplo, los modales son componentes visibles de la interfaz de usuario, mientras que el estado es comparable a la lógica de negocios y mantiene los datos organizados bajo el capó para que los use el resto de la aplicación.</p>\n<p>TypeScript proporciona tipos que indican qué tipo de estructuras de datos, funciones, componentes y estado esperar. Puedes intentar buscar <em>types.ts</em> o algo similar para comenzar. VSCode es de gran ayuda y solo resaltar variables y parámetros puede brindar una gran cantidad de información. Todo esto, naturalmente, depende de cómo se utilicen los tipos en el proyecto.</p>\n<p>Si el proyecto tiene pruebas unitarias, de integración o de un extremo a otro, leerlas probablemente sea beneficioso. Los casos de prueba son tu herramienta más importante al refactorizar o crear nuevas funcionalidades para la aplicación. Quieres asegurarte de no romper ninguna funcionalidad existente al manipular el código. TypeScript también puede orientarte sobre tipos de argumentos y retornos al cambiar el código.</p>\n<p>Recuerda que leer código es una habilidad en sí misma, y ​​no te preocupes si no comprendes el código la primera vez que lo lees. El código puede tener muchos casos de esquina, y es posible que se hayan agregado piezas de lógica por aquí y por allá a lo largo de su ciclo de desarrollo. Es difícil imaginar con qué tipo de problemas ha estado luchando el desarrollador anterior. Piensa en todo esto como si fueran <a href=\"https://en.wikipedia.org/wiki/Dendrochronology#Growth_rings\">anillos de crecimiento en árboles</a>. Comprender todo requiere profundizar en el código y los requisitos de la lógica de negocio. Lo más probable es que leas mucho más código del que producirás a lo largo de tu vida.</p>\n<h3>Patientor frontend</h3>\n<p>Es hora de ensuciarnos las manos finalizando el frontend para el backend que construimos en los <a href=\"/es/part9/typing_the_express_app\">ejercicios 9.8.-9.13.</a>. También vamos a necesitar añadir nuevas funcionalidades al backend para finalizar esta aplicación</p>\n<p>Antes de sumergirnos en el código, corramos tanto el frontend como el backend.</p>\n<p>Si todo va bien, deberías ver una página de lista de pacientes. Obtiene una lista de pacientes de nuestro backend y la muestra en la pantalla como una tabla simple. También hay un botón para crear nuevos pacientes en el backend. Como usamos datos simulados en lugar de una base de datos, los datos no persistirán; cerrar el backend eliminará todos los datos que hemos agregado. El diseño de la interfaz de usuario claramente no ha sido un punto fuerte de los creadores, así que ignoremos la interfaz de usuario por ahora.</p>\n<p>Luego de verificar que todo funciona, podemos comenzar a estudiar el código. Todas las cosas interesantes se encuentran en la carpeta <em>src</em>. Para tu comodidad, también hay un archivo <em>types.ts</em> listo para los tipos básicos utilizados en la aplicación, que tendrás que ampliar o refactorizar en los ejercicios.</p>\n<p>En principio, podríamos usar los mismos tipos tanto para el backend como para el frontend, pero generalmente el frontend tiene diferentes estructuras de datos y casos de uso para los datos, lo que hace que los tipos sean diferentes.\nPor ejemplo, el frontend tiene un estado y puede querer mantener los datos en objetos o mapas, mientras que el backend usa un array. Es posible que el frontend tampoco necesite todos los campos de un objeto de datos guardados en el backend, y es posible que deba agregar algunos campos nuevos para usarlos en la renderización.</p>\n<p>La estructura de carpetas tiene el siguiente aspecto:</p>\n<picture><img src=\"/static/0179bb3e82b2fb04104227b8e229410a/5a190/34brandnew.png\" alt=\"vscode estructura de carpetas para patientor\" srcset=\"/static/0179bb3e82b2fb04104227b8e229410a/772e8/34brandnew.png 200w,\n/static/0179bb3e82b2fb04104227b8e229410a/e17e5/34brandnew.png 400w,\n/static/0179bb3e82b2fb04104227b8e229410a/5a190/34brandnew.png 800w,\n/static/0179bb3e82b2fb04104227b8e229410a/c1b63/34brandnew.png 1200w,\n/static/0179bb3e82b2fb04104227b8e229410a/29007/34brandnew.png 1600w,\n/static/0179bb3e82b2fb04104227b8e229410a/df88b/34brandnew.png 1906w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Ademas del componente <em>App</em> y de un directorio para services, actualmente hay tres componentes principales: <em>AddPatientModal</em> y <em>PatientListPage</em> los cuales están definidos en un directorio, y un componente <em>HealthRatingBar</em> definido en un archivo. Si un componente tiene algunos sub-componentes que son usados en otra parte de la aplicación, podría ser una buena idea definir los componentes y sus sub-componentes en un directorio. Por ejemplo, ahora AddPatientModal esta definido en el archivo <em>components/AddPAtientModal/index.tsx</em> y su sub-componente <em>AddPatientForm</em> en su propio archivo bajo el mismo directorio.</p>\n<p>No hay nada muy sorprendente en el código. El estado y la comunicación con el backend son implementados con el hook <em>useState</em> y con Axios, similar a la aplicación de notas de la parte anterior. <a href=\"/es/part7/mas_sobre_estilos#material-ui\">Material UI</a> es utilizado para el estilo de la aplicación y la estructura de navegación esta implementada con <a href=\"/es/part7/react_router\">React Router</a>, ambas nos son familiares desde la parte 7 del curso.</p>\n<p>Desde el punto de vista del tipado, hay un par de cosas interesantes. El componente <em>App</em> le pasa la función <em>setPatients</em> como prop al componente <em>PatientListPage</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>patients<span class=\"token punctuation\">,</span> setPatients<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>Patient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token comment\">// ...</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Router<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Container<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Routes<span class=\"token operator\">></span>\n            <span class=\"token comment\">// ...</span>\n            <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span> element<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n              <span class=\"token operator\">&lt;</span>PatientListPage\n                patients<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>patients<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">                setPatients<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>setPatients<span class=\"token punctuation\">}</span></span>              <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span> \n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Routes<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Container<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Router<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Para mantener al compilador de TypeScript feliz, los props deben ser tipados como a continuación:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">patients</span> <span class=\"token operator\">:</span> Patient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token literal-property property\">setPatients</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>Dispatch<span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>SetStateAction<span class=\"token operator\">&lt;</span>Patient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">>></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PatientListPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> patients<span class=\"token punctuation\">,</span> setPatients <span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> Props</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> \n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Entonces, la función <em>setPatients</em> tiene el tipo <em>React.Dispatch&#x3C;React.SetStateAction&#x3C;Patient[]>></em>. Podemos ver el tipo en el editor cuando posamos el cursor sobre la función:</p>\n<picture><img src=\"/static/a843cd544ff307fe4d1ae83aed431bcf/5a190/73new.png\" alt=\"vscode mostrando array Patient como tipo para setPatients\" srcset=\"/static/a843cd544ff307fe4d1ae83aed431bcf/772e8/73new.png 200w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/e17e5/73new.png 400w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/5a190/73new.png 800w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/c1b63/73new.png 1200w,\n/static/a843cd544ff307fe4d1ae83aed431bcf/dd507/73new.png 1528w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p><a href=\"https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/basic_type_example#basic-prop-types-examples\">React TypeScript cheatsheet</a> tiene una lista muy buena de tipos de props típicos, donde podemos buscar ayuda si tenemos problemas para encontrar el tipo de algún prop que no sea obvio.</p>\n<p><em>PatientListPage</em> le pasa cuatro props al componente <em>AddPatientModal</em>. Dos de estos props son funciones. Miremos como están tipadas:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PatientListPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> patients<span class=\"token punctuation\">,</span> setPatients <span class=\"token punctuation\">}</span> <span class=\"token operator\">:</span> Props</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>modalOpen<span class=\"token punctuation\">,</span> setModalOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>boolean<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> closeModal <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token function\">setModalOpen</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">submitNewPatient</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">values</span><span class=\"token operator\">:</span> PatientFormValues</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token comment\">// ...</span>\n      <span class=\"token operator\">&lt;</span>AddPatientModal\n        modalOpen<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>modalOpen<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">        onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>submitNewPatient<span class=\"token punctuation\">}</span></span>        error<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">        onClose<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>closeModal<span class=\"token punctuation\">}</span></span>      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Los tipos se ven de la siguiente manera:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">modalOpen</span><span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">onClose</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function-variable function\">onSubmit</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">values</span><span class=\"token operator\">:</span> PatientFormValues</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  error<span class=\"token operator\">?</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">AddPatientModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> modalOpen<span class=\"token punctuation\">,</span> onClose<span class=\"token punctuation\">,</span> onSubmit<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>onClose</em> solo es una función que no acepta parámetros, y no devuelve nada, entonces el tipo es:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span></code></pre></div>\n<p>El tipo de <em>onSubmit</em> es un poco más interesante, tiene un parámetro que tiene el tipo <em>PatientFormValues</em>. El valor de retorno de la función es <em>Promise&#x3C;void></em>. Entonces, otra vez, el tipo de la función está escrito con la sintaxis de flecha:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">values</span><span class=\"token operator\">:</span> PatientFormValues</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span></code></pre></div>\n<p>El valor de retorno de una función <em>async</em> es una <a href=\"https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Statements/async_function\">promesa</a> con el valor que la función devuelve. Nuestra función no devuelve nada así que el tipo de retorno apropiado es simplemente <em>Promise&#x3C;void></em>.</p>\n</div>\n<div class=\"tasks\">\n<h3>Ejercicios 9.20.-9.21.</h3>\n<p>Pronto agregaremos un nuevo tipo para nuestra aplicación, <em>Entry</em>, que representa una entrada de diario de paciente liviana. Consiste en el texto del diario, es decir , <em>description</em>, una fecha de creación, información sobre el especialista que la creó y posibles códigos de diagnóstico. Los códigos de diagnóstico se asignan a los códigos ICD-10 devueltos desde el endpoint <em>/api/diagnoses</em>. Nuestra implementación ingenua será que un paciente tiene un array de entradas.</p>\n<p>Antes de entrar en esto, hagamos algunos trabajos preparatorios.</p>\n<h4>9.20: Patientor, paso 1</h4>\n<p>Crea un endpoint <em>/api/patients/:id</em> en el backend que devuelva toda la información del paciente para un paciente, incluyendo el array de entradas de pacientes que todavía está vacío para todos los pacientes. Por el momento, expande los tipos del backend de la siguiente manera:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// eslint-disable-next-line @typescript-eslint/no-empty-interface</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Entry</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Patient</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">ssn</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">occupation</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> Gender<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">dateOfBirth</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">entries</span><span class=\"token operator\">:</span> Entry<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> type NonSensitivePatient <span class=\"token operator\">=</span> Omit<span class=\"token operator\">&lt;</span>Patient<span class=\"token punctuation\">,</span> <span class=\"token string\">'ssn'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'entries'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>La respuesta debe tener el siguiente aspecto:</p>\n<picture><img src=\"/static/ad0b2c4fbc560a07305bb3de1d56578c/5a190/38a.png\" alt=\"navegador mostrando array de entradas vacío cuando accede a paciente\" srcset=\"/static/ad0b2c4fbc560a07305bb3de1d56578c/772e8/38a.png 200w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/e17e5/38a.png 400w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/5a190/38a.png 800w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/c1b63/38a.png 1200w,\n/static/ad0b2c4fbc560a07305bb3de1d56578c/ad00e/38a.png 1366w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.21: Patientor, paso 2</h4>\n<p>Crea una página para mostrar la información completa de un paciente en el frontend.</p>\n<p>El usuario debe poder acceder a la información de un paciente haciendo click en el nombre del paciente.</p>\n<p>Obtén los datos del endpoint creado en el ejercicio anterior.</p>\n<p>Puedes usar <a href=\"https://material-ui.com/\">MaterialUI</a> para los nuevos componentes pero eso depende de ti ya que ahora nuestro enfoque principal es TypeScript.</p>\n<p>Es posible que quieras echarle un vistazo a la <a href=\"/es/part7/react_router\">parte 7</a> si aún no comprendes cómo funciona <a href=\"https://reactrouter.com/en/main/start/tutorial\">React Router</a>.</p>\n<p>El resultado podría verse así:</p>\n<picture><img src=\"/static/bfd4dd1cd1135848beb8f102c55d816a/5a190/39x.png\" alt=\"navegador mostrando patientor con un paciente\" srcset=\"/static/bfd4dd1cd1135848beb8f102c55d816a/772e8/39x.png 200w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/e17e5/39x.png 400w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/5a190/39x.png 800w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/c1b63/39x.png 1200w,\n/static/bfd4dd1cd1135848beb8f102c55d816a/985a9/39x.png 1512w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>El ejemplo usa <a href=\"https://mui.com/components/material-icons/\">Material UI Icons</a> para representar los géneros.</p>\n</div>\n<div class=\"content\">\n<h3>Full entries</h3>\n<p>En el <a href=\"/es/part9/tipando_una_aplicacion_express#ejercicios-9-10-9-11\">ejercicio 9.10</a> implementamos un endpoint para obtener información acerca de varios diagnósticos, pero todavía no lo usamos en absoluto.\nDado que ahora tenemos una página para ver la información de un paciente, sería bueno ampliar un poco nuestros datos.\nAgreguemos un campo <em>Entry</em> a los datos de nuestro paciente para que los datos de un paciente contengan sus entradas médicas, incluidos los posibles diagnósticos.</p>\n<p>Vamos a deshacernos de nuestros datos iniciales de pacientes antiguos del backend y comencemos a usar <a href=\"https://github.com/fullstack-hy2020/misc/blob/master/patients-full.ts\">este formato expandido</a>.</p>\n<p>Creemos ahora un tipo <em>Entry</em> adecuado en función de los datos que tenemos.</p>\n<p>Si echamos un vistazo más de cerca a los datos, podemos ver que las entradas son en realidad bastante diferentes entre sí. Por ejemplo, echemos un vistazo a las dos primeras entradas:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'d811e46d-70b3-4d90-b090-4535c7cf8fb1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">'2015-01-02'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hospital'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> <span class=\"token string\">'MD House'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">diagnosisCodes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'S62.5'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span>\n    <span class=\"token string\">\"Healing time appr. 2 weeks. patient doesn't remember how he got the injury.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">discharge</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">'2015-01-16'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">criteria</span><span class=\"token operator\">:</span> <span class=\"token string\">'Thumb has healed.'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'fcd59fa6-c4b4-4fec-ac4d-df4fe1f85f62'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">'2019-08-05'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'OccupationalHealthcare'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> <span class=\"token string\">'MD House'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">employerName</span><span class=\"token operator\">:</span> <span class=\"token string\">'HyPD'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">diagnosisCodes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Z57.1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Z74.3'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'M51.2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span>\n    <span class=\"token string\">'Patient mistakenly found himself in a nuclear plant waste site without protection gear. Very minor radiation poisoning. '</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">sickLeave</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">startDate</span><span class=\"token operator\">:</span> <span class=\"token string\">'2019-08-05'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">endDate</span><span class=\"token operator\">:</span> <span class=\"token string\">'2019-08-28'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Inmediatamente podemos ver que mientras los primeros campos son los mismos, la primera entrada tiene un campo <em>discharge</em> y la segunda entrada tiene los campos <em>employerName</em> y <em>sickLeave</em>.\nTodas las entradas parecen tener algunos campos en común, pero algunos campos son específicos de la entrada.</p>\n<p>Al observar a <em>type</em>, podemos ver que en realidad hay tres tipos de entradas: <em>OccupationalHealthcare</em>, <em>Hospital</em> y <em>HealthCheck</em>.\nEsto indica que necesitamos tres tipos diferentes. Dado que todos tienen algunos campos en común, es posible que deseemos crear una interfaz de entrada base que podamos ampliar con los diferentes campos de cada tipo.</p>\n<p>Al mirar los datos, parece que los campos <em>id</em>, <em>description</em>, <em>date</em> y <em>specialist</em> son algo que se puede encontrar en cada entrada. Además de eso, parece que <em>diagnosisCodes</em> solo se encuentra en una entrada de tipo <em>OccupationalHealthCare</em> y una de tipo <em>Hospital</em>. Dado que no siempre se usa, incluso en esos tipos de entradas, es seguro asumir que el campo es opcional. También podríamos considerar agregarlo al tipo <em>HealthCheck</em>, ya que es posible que simplemente no se use en estas entradas específicas.</p>\n<p>Entonces, nuestra <em>BaseEntry</em> desde la que se podría extender cada tipo sería la siguiente:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  diagnosisCodes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Si queremos ajustarlo un poco más, dado que ya tenemos un tipo <em>Diagnosis</em> definido en el backend, es posible que solo queramos referirnos al campo de código del tipo <em>Diagnosis</em> directamente en caso de que su tipo alguna vez cambie.\nPodemos hacerlo así:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  diagnosisCodes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Como mencionamos <a href=\"/es/part9/primeros_pasos_con_type_script#la-sintaxis-alternativa-para-arrays\">anteriormente en está parte</a>, podríamos definir un array con la sintaxis <em>Array&#x3C;Type></em> en vez de definirlo como <em>Type[]</em>. En casos como este, escribir <em>Diagnosis['code'][]</em> comienza a verse un poco extraño así que decidimos usar la sintaxis alternativa (que tambien es la recomendada por la regla de ESlint <a href=\"https://typescript-eslint.io/rules/array-type/#array-simple\">array-simple</a>):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">description</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">specialist</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  diagnosisCodes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ahora que tenemos <em>BaseEntry</em> definido, podemos comenzar a crear los tipos de entrada extendidos que usaremos. Comencemos por crear el tipo <em>HealthCheckEntry</em>.</p>\n<p>Las entradas de tipo <em>HealthCheck</em> contienen el campo <em>HealthCheckRating</em>, que es un número entero de 0 a 3, cero significa <em>Healthy</em> (saludable) y tres significa <em>CriticalRisk</em> (riesgo crítico). Este es un caso perfecto para una definición de enum.\nCon estas especificaciones podríamos escribir una definición de tipo <em>HealthCheckEntry</em> así:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">enum</span> HealthCheckRating <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"Healthy\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"LowRisk\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"HighRisk\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"CriticalRisk\"</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">HealthCheckEntry</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseEntry</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HealthCheck\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">healthCheckRating</span><span class=\"token operator\">:</span> HealthCheckRating<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ahora solo necesitamos crear los tipos <em>OccupationalHealthCareEntry</em> y <em>HospitalEntry</em> para que podamos combinarlos en una unión y exportarlos como un tipo Entry como este:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> type Entry <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> HospitalEntry\n  <span class=\"token operator\">|</span> OccupationalHealthCareEntry\n  <span class=\"token operator\">|</span> HealthCheckEntry<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Omit con uniones</h3>\n<p>Un punto importante acerca de las uniones, es que cuando las usas con <em>Omit</em> para excluir una propiedad, funciona probablemente de una forma inesperada. Supón que queremos remover el <em>id</em> de cada <em>Entry</em>. Podríamos pensar en usar</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Omit<span class=\"token operator\">&lt;</span>Entry<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span></code></pre></div>\n<p>pero <a href=\"https://github.com/microsoft/TypeScript/issues/42680\">no funcionara como podríamos esperar</a>. De hecho, el tipo resultante solo contendría las propiedades comunes, pero no las que no comparten. Una posible alternativa es definir una función parecida a Omit para lidiar con estas situaciones:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// Define omit especial para uniones</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UnionOmit<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token keyword\">extends</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">symbol</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">unknown</span></span> <span class=\"token operator\">?</span> Omit<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span><span class=\"token operator\">></span> <span class=\"token operator\">:</span> <span class=\"token builtin\">never</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Define Entry sin la propiedad 'id'</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">EntryWithoutId</span> <span class=\"token operator\">=</span> UnionOmit<span class=\"token operator\">&lt;</span>Entry<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n</div>\n<div class=\"tasks\">\n<h3>Ejercicios 9.22-9.29</h3>\n<p>¡Ahora estamos listos para darle los toques finales a la aplicación!</p>\n<h4>9.22: Patientor, paso 3</h4>\n<p>Define los tipos <em>OccupationalHealthCareEntry</em> y <em>HospitalEntry</em> para que se ajusten a los nuevos datos de ejemplo. Asegúrese de que su backend devuelva las entradas correctamente cuando vaya a la ruta de un paciente individual</p>\n<picture><img src=\"/static/21b5816433d1a5aeaf15bdac4f528d77/5a190/40.png\" alt=\"navegador mostrando los datos de las entradas apropiadamente para el paciente\" srcset=\"/static/21b5816433d1a5aeaf15bdac4f528d77/772e8/40.png 200w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/e17e5/40.png 400w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/5a190/40.png 800w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/c1b63/40.png 1200w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/29007/40.png 1600w,\n/static/21b5816433d1a5aeaf15bdac4f528d77/ddf4f/40.png 1624w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>¡Utiliza los tipos correctamente en el backend! Por ahora, no es necesario hacer una validación adecuada para todos los campos de las entradas en el backend, es suficiente, por ejemplo, comprobar que campo <em>type</em> tiene un valor correcto.</p>\n<h4>9.23: Patientor, paso 4</h4>\n<p>Amplía la página de un paciente en el frontend para listar <em>date</em>, <em>description</em> y <em>diagnoseCodes</em> de las entradas del paciente.</p>\n<p>Puedes utilizar la misma definición de tipo para una <em>Entry</em> en el frontend. Para estos ejercicios, basta con copiar/pegar las definiciones del backend al frontend.</p>\n<p>Tu solución podría verse así:</p>\n<picture><img src=\"/static/bc5d529ae2163ff75b844c5c014ad074/5a190/41.png\" alt=\"navegador mostrando lista de códigos de diagnosis para un paciente\" srcset=\"/static/bc5d529ae2163ff75b844c5c014ad074/772e8/41.png 200w,\n/static/bc5d529ae2163ff75b844c5c014ad074/e17e5/41.png 400w,\n/static/bc5d529ae2163ff75b844c5c014ad074/5a190/41.png 800w,\n/static/bc5d529ae2163ff75b844c5c014ad074/c1b63/41.png 1200w,\n/static/bc5d529ae2163ff75b844c5c014ad074/29007/41.png 1600w,\n/static/bc5d529ae2163ff75b844c5c014ad074/5ba90/41.png 1604w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.24: Patientor, paso 5</h4>\n<p>Obtén y agrega diagnósticos al estado de la aplicación desde el endpoint <em>/api/diagnoses</em>. Utiliza los nuevos datos de diagnóstico para mostrar las descripciones de los códigos de diagnóstico del paciente:</p>\n<picture><img src=\"/static/6d08345c7fd0b3141e9de139f3ec87b0/5a190/42.png\" alt=\"navegador mostrando lista de códigos y sus respectivas descripciones para el paciente\" srcset=\"/static/6d08345c7fd0b3141e9de139f3ec87b0/772e8/42.png 200w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/e17e5/42.png 400w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/5a190/42.png 800w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/c1b63/42.png 1200w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/29007/42.png 1600w,\n/static/6d08345c7fd0b3141e9de139f3ec87b0/807a0/42.png 1652w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.25: Patientor, paso 6</h4>\n<p>Amplía la lista de entradas en la página del paciente para incluir los detalles de la entrada, con un nuevo componente que muestra el resto de la información de las entradas de los pacientes, distinguiendo diferentes tipos entre sí.</p>\n<p>Podrías utilizar, por ejemplo. <a href=\"https://mui.com/components/material-icons/\">Icons</a> o algún otro componente de <a href=\"https://mui.com/\">Material UI</a> para obtener imágenes apropiadas para tu listado.</p>\n<p>Debes utilizar un renderizado basado en <em>switch case</em> y una <em>comprobación de tipo exhaustiva</em> para que no se puedan olvidar casos.</p>\n<p>Como esto:</p>\n<picture><img src=\"/static/97edaf23398bcd60caf2b0338f9f8135/5a190/35c.png\" alt=\"vscode mostrando error para healthCheckEntry no siendo asignable a tipo never\" srcset=\"/static/97edaf23398bcd60caf2b0338f9f8135/772e8/35c.png 200w,\n/static/97edaf23398bcd60caf2b0338f9f8135/e17e5/35c.png 400w,\n/static/97edaf23398bcd60caf2b0338f9f8135/5a190/35c.png 800w,\n/static/97edaf23398bcd60caf2b0338f9f8135/c1b63/35c.png 1200w,\n/static/97edaf23398bcd60caf2b0338f9f8135/1acf3/35c.png 1596w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Las entradas resultantes en la lista <em>podrían</em> verse así:</p>\n<picture><img src=\"/static/9d1114d097b158e0795d6bcddde01e86/5a190/36x.png\" alt=\"navegador mostrando listado de entradas y sus detalles en un formato más agradable\" srcset=\"/static/9d1114d097b158e0795d6bcddde01e86/772e8/36x.png 200w,\n/static/9d1114d097b158e0795d6bcddde01e86/e17e5/36x.png 400w,\n/static/9d1114d097b158e0795d6bcddde01e86/5a190/36x.png 800w,\n/static/9d1114d097b158e0795d6bcddde01e86/c1b63/36x.png 1200w,\n/static/9d1114d097b158e0795d6bcddde01e86/29007/36x.png 1600w,\n/static/9d1114d097b158e0795d6bcddde01e86/29114/36x.png 1920w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.26: Patientor, paso 7</h4>\n<p>Hemos establecido que los pacientes pueden tener diferentes clases de entradas. Todavía no tenemos ninguna forma de agregarle entradas a los pacientes en nuestra aplicación, es bastante inútil como registro médico electrónico.</p>\n<p>Tu siguiente tarea es agregar un endpoint <em>/api/patients/:id/entries</em> a tu backend, a través del cual puedas hacer un POST para agregar una entrada para un paciente.</p>\n<p>Recuerda que tenemos diferentes tipos de entradas en nuestra aplicación, por lo que nuestro backend debe admitir todos esos tipos y verificar que se proporcionen al menos todos los campos obligatorios para cada tipo.</p>\n<p>En este ejercicio probablemente tengas que recordar <a href=\"/es/part9/grande_finale_patientor#omit-con-uniones\">este truco</a></p>\n<p>Podrías asumir que los códigos de diagnóstico son enviados en el formato correcto y utilizar, por ejemplo, el siguiente tipo de parser para extraerlos del body de la solicitud:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> parseDiagnosisCodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>object<span class=\"token operator\">:</span> unknown<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span>  <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>object <span class=\"token operator\">||</span> <span class=\"token keyword\">typeof</span> object <span class=\"token operator\">!==</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">'diagnosisCodes'</span> <span class=\"token keyword\">in</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// we will just trust the data to be in correct form</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> object<span class=\"token punctuation\">.</span>diagnosisCodes <span class=\"token keyword\">as</span> Array<span class=\"token operator\">&lt;</span>Diagnosis<span class=\"token punctuation\">[</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>9.27: Patientor, paso 8</h4>\n<p>Ahora que nuestro backend permite agregar entradas, queremos agregar la funcionalidad correspondiente al frontend. En este ejercicio, debes agregar un formulario para agregarle una entrada a un paciente. Un lugar intuitivo para acceder al formulario sería la página del paciente.</p>\n<p>En este ejercicio es suficiente <strong>admitir un tipo de entrada</strong>. Todos los campos del formulario pueden ser simples inputs de texto, por lo que depende del usuario ingresar valores validos.</p>\n<p>Tras un envío exitoso, la nueva entrada debe agregarse al paciente correcto y las entradas del paciente en la página del paciente deben actualizarse para contener la nueva entrada.</p>\n<p>Tu formulario podría verse así:</p>\n<picture><img src=\"/static/3062bc3d73b28275b7f306436d8f7e26/5a190/74new.png\" alt=\"Nuevo formulario de entradas de controles de salud de Patientor\" srcset=\"/static/3062bc3d73b28275b7f306436d8f7e26/772e8/74new.png 200w,\n/static/3062bc3d73b28275b7f306436d8f7e26/e17e5/74new.png 400w,\n/static/3062bc3d73b28275b7f306436d8f7e26/5a190/74new.png 800w,\n/static/3062bc3d73b28275b7f306436d8f7e26/c1b63/74new.png 1200w,\n/static/3062bc3d73b28275b7f306436d8f7e26/29007/74new.png 1600w,\n/static/3062bc3d73b28275b7f306436d8f7e26/d5f92/74new.png 2150w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Si el usuario ingresa valores inválidos en el formulario y el backend rechaza la adición, muestra un mensaje de error apropiado</p>\n<picture><img src=\"/static/eb8b015ea2edb1cc4de65a058c1bdd91/5a190/75new.png\" alt=\"navegador mostrando error: value healthCheckRating 15\" srcset=\"/static/eb8b015ea2edb1cc4de65a058c1bdd91/772e8/75new.png 200w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/e17e5/75new.png 400w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/5a190/75new.png 800w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/c1b63/75new.png 1200w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/29007/75new.png 1600w,\n/static/eb8b015ea2edb1cc4de65a058c1bdd91/73dae/75new.png 2122w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<h4>9.28: Patientor, paso 9</h4>\n<p>Amplía tu solución para que admita <em>todos los tipos de entrada</em></p>\n<h4>9.29: Patientor, paso 10</h4>\n<p>Mejora el formulario de creación de entradas para que sea más difícil entrar fechas incorrectas, códigos de diagnóstico y ratings de salud.</p>\n<p>Tu formulario mejorado podría verse de esta manera:</p>\n<picture><img src=\"/static/ba0a11d6e57353943fd5d32108048bca/5a190/76new.png\" alt=\"patientor mostrando ui de calendario elegante\" srcset=\"/static/ba0a11d6e57353943fd5d32108048bca/772e8/76new.png 200w,\n/static/ba0a11d6e57353943fd5d32108048bca/e17e5/76new.png 400w,\n/static/ba0a11d6e57353943fd5d32108048bca/5a190/76new.png 800w,\n/static/ba0a11d6e57353943fd5d32108048bca/c1b63/76new.png 1200w,\n/static/ba0a11d6e57353943fd5d32108048bca/29007/76new.png 1600w,\n/static/ba0a11d6e57353943fd5d32108048bca/05244/76new.png 1752w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Los códigos de diagnóstico ahora se configuran con el elemento de Material UI <a href=\"https://mui.com/material-ui/react-select/#multiple-select\">multiple select</a> y las fechas con el elemento <a href=\"https://mui.com/material-ui/api/input/\">Input</a> con el tipo <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date\">date</a>.</p>\n<h3>Envío de ejercicios y obtención de créditos</h3>\n<p>Los ejercicios de esta parte son enviados a través de <a href=\"https://studies.cs.helsinki.fi/stats/courses/fs-typescript\">el sistema de envío de ejercicios</a> al igual que en las partes anteriores, con la diferencia de que esta vez el envío se realiza en una \"instancia del curso\" diferente. ¡Recuerda que tienes que terminar al menos 24 ejercicios para aprobar esta parte!</p>\n<p>Una vez que hayas completado los ejercicios y quieras obtener los créditos, háznoslo saber a través de el sistema de envío de ejercicios que has completado el curso:</p>\n<picture><img src=\"/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/5a190/21.png\" alt=\"Submissions\" srcset=\"/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/772e8/21.png 200w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/e17e5/21.png 400w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/5a190/21.png 800w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/c1b63/21.png 1200w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/29007/21.png 1600w,\n/static/d2a0d8c8142ce4113bdf5bfec2d1dd37/74e37/21.png 1732w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p><strong>Ten en cuenta</strong> que necesitas registrarte a la parte del curso correspondiente para obtener los créditos registrados, lee <a href=\"/es/part0/informacion_general#partes-y-finalizacion\">esto</a> para más información.</p>\n<p>Puedes descargar el certificado por completar esta parte clicando en uno de los iconos de las banderas. El icono de la bandera se corresponde con el lenguaje del certificado.</p>\n</div>","frontmatter":{"mainImage":{"publicURL":"/static/ed8ae98c5d885b4d1928a681eefbe7c4/part-9.svg"},"part":9,"letter":"e","lang":"es"}}},"pageContext":{"part":9,"letter":"e","lang":"es"}},"staticQueryHashes":["3128451518"]}