{"componentChunkName":"component---src-templates-content-template-js","path":"/osa0/web_sovelluksen_toimintaperiaatteita","result":{"data":{"markdownRemark":{"html":"<div class=\"content\">\n<p>Ennen kuin aloitamme ohjelmoinnin, käymme läpi web-sovellusten toimintaperiaatteita tarkastelemalla osoitteessa <a href=\"https://studies.cs.helsinki.fi/exampleapp\">https://studies.cs.helsinki.fi/exampleapp</a> olevaa esimerkkisovellusta.</p>\n<p>Sovelluksen olemassaolon tarkoitus on ainoastaan havainnollistaa kurssin peruskäsitteistöä. Sovellus ei ole missään tapauksessa esimerkki siitä, <i>miten</i> web-sovelluksia kannattaisi kehittää. Päinvastoin se demonstroi eräitä historiallisia web-sovellusten toteutukseen käytettyjä tapoja ja tekniikoita, joiden katsotaan nykyään olevan jopa <i>huonoja käytänteitä</i>.</p>\n<p>Kurssin suosittelemaa tyyliä noudattavan koodin kirjoittaminen alkaa <a href=\"/osa1\">osasta 1</a>.</p>\n<p>Avataan selaimella <a href=\"https://studies.cs.helsinki.fi/exampleapp/\">esimerkkisovellus</a>. Sivun ensimmäinen lataus kestää joskus hetken.</p>\n<p>Kurssimateriaali olettaa, että käytössä on Chrome-selain.</p>\n<p><strong>Web-sovelluskehityksen sääntö numero yksi</strong>: pidä selaimen Developer-konsoli koko ajan auki. Konsoli avautuu Macilla painamalla yhtä aikaa <em>option</em> <em>cmd</em> ja <em>i</em>. Windowsilla konsolin saa auki painamalla <em>F12</em> tai yhtä aikaa <em>ctrl</em> <em>shift</em> ja <em>i</em>.</p>\n<p>Ennen kuin jatkat eteenpäin, selvitä, miten saat koneellasi konsolin auki (googlaa tarvittaessa), ja muista pitää se auki <i>aina</i>, kun teet web-sovelluksia.</p>\n<p>Konsoli näyttää seuraavalta:</p>\n<picture><img src=\"/static/aaaefdadeccea5768728b3cdd41fd8f2/5a190/1e.png\" srcset=\"/static/aaaefdadeccea5768728b3cdd41fd8f2/772e8/1e.png 200w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/e17e5/1e.png 400w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/5a190/1e.png 800w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/c1b63/1e.png 1200w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/29007/1e.png 1600w,\n/static/aaaefdadeccea5768728b3cdd41fd8f2/701e9/1e.png 1780w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Varmista, että välilehti <i>Network</i> on avattuna ja aktivoi valinta <i>Disable cache</i> kuten kuvassa on tehty. Myös <i>Preserve logs</i> on joskus hyödyllinen, sillä se säilyttää sovelluksen tulostamat logit sivujen uudelleenlatauksen yhteydessä.</p>\n<p><strong>HUOM:</strong> konsolin tärkein välilehti on <i>Console</i>. Käytämme nyt johdanto-osassa kuitenkin ensin melko paljon välilehteä <i>Network</i>.</p>\n<h3>HTTP GET</h3>\n<p>Selain ja web-palvelin kommunikoivat keskenään <a href=\"https://developer.mozilla.org/fi/docs/Web/HTTP\">HTTP</a>-protokollaa käyttäen. Avoinna oleva konsolin Network-välilehti kertoo, miten selain ja palvelin kommunikoivat.</p>\n<p>Kun päivität sivun (eli painat F5-näppäintä tai selaimessa olevaa symbolia ↺), konsoli kertoo, että tapahtuu kaksi asiaa:</p>\n<ul>\n<li>selain hakee web-palvelimelta sivun <a href=\"https://studies.cs.helsinki.fi/exampleapp/\">https://studies.cs.helsinki.fi/exampleapp/</a> sisällön</li>\n<li>ja lataa kuvan <i>kuva.png</i></li>\n</ul>\n<picture><img src=\"/static/af6f88822db737cac2ea80d9343756fc/5a190/2e.png\" srcset=\"/static/af6f88822db737cac2ea80d9343756fc/772e8/2e.png 200w,\n/static/af6f88822db737cac2ea80d9343756fc/e17e5/2e.png 400w,\n/static/af6f88822db737cac2ea80d9343756fc/5a190/2e.png 800w,\n/static/af6f88822db737cac2ea80d9343756fc/c1b63/2e.png 1200w,\n/static/af6f88822db737cac2ea80d9343756fc/29007/2e.png 1600w,\n/static/af6f88822db737cac2ea80d9343756fc/5fc9a/2e.png 1648w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Jos ruutusi on pieni, saatat joutua suurentamaan konsoli-ikkunaa, jotta saat selaimen tekemät haut näkyviin.</p>\n<p>Klikkaamalla näistä ensimmäistä paljastuu tarkempaa tietoa siitä, mistä on kyse:</p>\n<picture><img src=\"/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/5a190/3e.png\" srcset=\"/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/772e8/3e.png 200w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/e17e5/3e.png 400w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/5a190/3e.png 800w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/c1b63/3e.png 1200w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/29007/3e.png 1600w,\n/static/ddcd5afaeabfc1b0e8a4325bfeff90ee/d3d45/3e.png 1614w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Ylimmästä osasta <i>General</i> selviää, että selain teki <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET\">GET</a>-metodilla pyynnön osoitteeseen <i><a href=\"https://studies.cs.helsinki.fi/exampleapp/\">https://studies.cs.helsinki.fi/exampleapp/</a></i> ja että pyyntö oli onnistunut, sillä pyyntöön saatiin vastaus, jonka <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\">statuskoodi</a> on 200.</p>\n<p>Pyyntöön ja palvelimen lähettämään vastaukseen liittyy erinäinen määrä otsakkeita eli <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields\">headereita</a>:</p>\n<picture><img src=\"/static/5e6569d4ad80edce4a03a25358b8f195/5a190/4e.png\" srcset=\"/static/5e6569d4ad80edce4a03a25358b8f195/772e8/4e.png 200w,\n/static/5e6569d4ad80edce4a03a25358b8f195/e17e5/4e.png 400w,\n/static/5e6569d4ad80edce4a03a25358b8f195/5a190/4e.png 800w,\n/static/5e6569d4ad80edce4a03a25358b8f195/c1b63/4e.png 1200w,\n/static/5e6569d4ad80edce4a03a25358b8f195/29007/4e.png 1600w,\n/static/5e6569d4ad80edce4a03a25358b8f195/10d53/4e.png 1724w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Ylempänä oleva <i>Response headers</i> kertoo mm. vastauksen koon tavuina ja vastaushetken. Tärkeä headeri <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\">Content-Type</a> kertoo, että vastaus on <a href=\"https://en.wikipedia.org/wiki/UTF-8\">utf-8</a>-muodossa oleva tekstitiedosto, jonka sisältö on muotoiltu HTML:llä. Näin selain tietää, että kyseessä on normaali <a href=\"https://en.wikipedia.org/wiki/HTML\">HTML</a>-sivu, joka tulee renderöidä käyttäjän selaimeen \"web-sivun tavoin\".</p>\n<p>Välilehti <i>Response</i> näyttää, miltä pyyntöön vastauksena lähetetty data näyttää. Kyseessä on siis normaali HTML-sivu, jonka <i>body</i>-osassa määritellään selaimessa näytettävän sivun rakenne:</p>\n<picture><img src=\"/static/4e49815c455c943b6eb14fe8cc0cefb3/5a190/5e.png\" srcset=\"/static/4e49815c455c943b6eb14fe8cc0cefb3/772e8/5e.png 200w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/e17e5/5e.png 400w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/5a190/5e.png 800w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/c1b63/5e.png 1200w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/29007/5e.png 1600w,\n/static/4e49815c455c943b6eb14fe8cc0cefb3/3a1b1/5e.png 1686w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Sivu sisältää <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div\">div</a>-elementin, jonka sisällä on otsikko, tieto luotujen muistiinpanojen määrästä, linkki sivulle <i>notes</i> ja kuvaa vastaava <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img\">img</a>-tagi.</p>\n<p>img-tagin ansiosta selain tekee toisenkin <i>HTTP-pyynnön</i>, jonka avulla se hakee kuvan <i>kuva.png</i> palvelimelta. Pyynnön tiedot näyttävät seuraavalta:</p>\n<picture><img src=\"/static/f053fa9082a1ad72066fa193346d0378/5a190/6e.png\" srcset=\"/static/f053fa9082a1ad72066fa193346d0378/772e8/6e.png 200w,\n/static/f053fa9082a1ad72066fa193346d0378/e17e5/6e.png 400w,\n/static/f053fa9082a1ad72066fa193346d0378/5a190/6e.png 800w,\n/static/f053fa9082a1ad72066fa193346d0378/c1b63/6e.png 1200w,\n/static/f053fa9082a1ad72066fa193346d0378/29007/6e.png 1600w,\n/static/f053fa9082a1ad72066fa193346d0378/49ee2/6e.png 1618w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Eli pyyntö on tehty osoitteeseen <a href=\"https://studies.cs.helsinki.fi/exampleapp/kuva.png\">https://studies.cs.helsinki.fi/exampleapp/kuva.png</a>, ja se on tyypiltään HTTP GET. Vastaukseen liittyvät headerit kertovat, että vastauksen koko on 89350 tavua ja vastauksen <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type\">Content-type</a> on <i>image/png</i>, eli kyseessä on png-tyyppinen kuva. Tämän tiedon ansiosta selain tietää, miten kuva on piirrettävä HTML-sivulle.</p>\n<p>Sivun <a href=\"https://studies.cs.helsinki.fi/exampleapp/\">https://studies.cs.helsinki.fi/exampleapp/</a> avaaminen selaimessa saa siis aikaan alla olevan <a href=\"https://en.wikipedia.org/wiki/Sequence_diagram\">sekvenssikaavion</a> kuvaaman tapahtumasarjan:</p>\n<picture><img src=\"/static/22b2a40c65af76b2b4b28e57d186a9af/5a190/7m.png\" srcset=\"/static/22b2a40c65af76b2b4b28e57d186a9af/772e8/7m.png 200w,\n/static/22b2a40c65af76b2b4b28e57d186a9af/e17e5/7m.png 400w,\n/static/22b2a40c65af76b2b4b28e57d186a9af/5a190/7m.png 800w,\n/static/22b2a40c65af76b2b4b28e57d186a9af/c1b63/7m.png 1200w,\n/static/22b2a40c65af76b2b4b28e57d186a9af/78612/7m.png 1260w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Sekvenssikaavio kuvaa selaimen (browser) ja palvelimen (server) välisen kommunikaation aikajärjestyksessä \"ylhäältä alaspäin\", eli ylimpänä on ensin selaimen lähettämä pyyntö, jonka jälkeen tulee palvelimen vastaus tähän pyyntöön ja tämän jälkeen selaimen seuraava pyyntö jne.</p>\n<p>Ensin selain tekee palvelimelle HTTP GET ‑pyynnön, jonka avulla se hakee sivun HTML-koodin. HTML-koodissa olevan <i>img</i>-tagin ansiosta selain hakee palvelimelta kuvan <i>kuva.png</i>. Selain renderöi HTML-kielellä muotoillun sivun ja kuvan näytölle. Vaikka käyttäjä ei sitä helposti huomaa, alkaa sivu renderöityä näytölle jo ennen kuvan hakemista.</p>\n<h3>Perinteinen web-sovellus</h3>\n<p>Esimerkkisovelluksen pääsivu toimii <i>perinteisen web-sovelluksen</i> tapaan. Mentäessä sivulle selain hakee palvelimelta sivun strukturoinnin ja tekstuaalisen sisällön määrittelevän HTML-dokumentin.</p>\n<p>Palvelin on muodostanut dokumentin jollain tavalla. Dokumentti voi olla <i>staattista sisältöä</i> eli palvelimen hakemistossa oleva tekstitiedosto. Dokumentti voi myös olla <i>dynaaminen</i>, eli palvelin voi muodostaa HTML-dokumentit ohjelmakoodin avulla hyödyntäen esim. tietokannassa olevaa dataa. Esimerkkisovelluksessa sivun HTML-koodi on muodostettu dynaamisesti, sillä se sisältää tiedon luotujen muistiinpanojen lukumäärästä.</p>\n<p>Etusivun muodostava koodi näyttää seuraavalta:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFrontPageHtml</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">noteCount</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;!DOCTYPE html>\n    &lt;html>\n      &lt;head>\n      &lt;/head>\n      &lt;body>\n        &lt;div class=\"container\">\n          &lt;h1>Full stack -esimerkkisovellus&lt;/h1>\n          &lt;p>muistiinpanoja luotu </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>noteCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> kappaletta&lt;/p>\n          &lt;a href=\"/notes\">muistiinpanot&lt;/a>\n          &lt;img src=\"kuva.png\" width=\"200\" />\n        &lt;/div>\n      &lt;/body>\n    &lt;/html>\n  </span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token function\">getFrontPageHtml</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Koodia ei tarvitse vielä ymmärtää, mutta käytännössä HTML-sivun sisältö on talletettu ns. template stringinä eli merkkijonona, jonka sekaan on mahdollisuus evaluoida esim. muuttujien arvoja. Etusivun dynaamisesti muuttuva osa eli muistiinpanojen lukumäärä (koodissa <em>noteCount</em>) korvataan template stringissä senhetkisellä, konkreettisella lukuarvolla (koodissa <em>notes.length</em>).</p>\n<p>HTML:n kirjoittaminen suoraan koodin sekaan ei tietenkään ole järkevää, mutta vanhan liiton PHP-ohjelmoijille se oli arkipäivää.</p>\n<p>Perinteisissä websovelluksissa selain on \"tyhmä\" – se ainoastaan pyytää palvelimelta HTML-muodossa olevia sisältöjä, kaikki sovelluslogiikka on palvelimessa. Palvelin voi olla tehty esim. jo eläkkeelle jääneen kurssin <a href=\"https://courses.helsinki.fi/fi/tkt21007\">Web-palvelinohjelmointi</a> tapaan Java Springillä, <a href=\"https://hy-tsoha.github.io/\">tietokantasovelluksessa</a> käytetyllä Python Flaskilla tai <a href=\"http://rubyonrails.org/\">Ruby on Railsilla</a>. Esimerkissä on käytetty Node.js:n <a href=\"https://expressjs.com/\">Express</a>-kirjastoa. Tulemme käyttämään kurssilla Node.js:ää ja Expressiä web-palvelimen toteuttamiseen.</p>\n<h3>Selaimessa suoritettava sovelluslogiikka</h3>\n<p>Pidä konsoli edelleen auki. Tyhjennä konsolin näkymä painamalla vasemmalla olevaa ⦸-symbolia.</p>\n<p>Kun menet nyt <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">muistiinpanojen</a> sivulle eli klikkaat linkkiä <i>notes</i>, selain tekee neljä HTTP-pyyntöä:</p>\n<picture><img src=\"/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/5a190/8e.png\" srcset=\"/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/772e8/8e.png 200w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/e17e5/8e.png 400w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/5a190/8e.png 800w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/c1b63/8e.png 1200w,\n/static/02ed5b206f76e1f9bcf4ad3ffff8a2b4/2b608/8e.png 1540w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Kaikki pyynnöt ovat <i>erityyppisiä</i>. Ensimmäinen pyyntö on tyypiltään <i>document</i>.\nKyseessä on sivun HTML-koodi, joka näyttää seuraavalta:</p>\n<picture><img src=\"/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/5a190/9e.png\" srcset=\"/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/772e8/9e.png 200w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/e17e5/9e.png 400w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/5a190/9e.png 800w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/c1b63/9e.png 1200w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/29007/9e.png 1600w,\n/static/8856aaf0012972e3b7d5b1dfc6aaa3f6/8adb9/9e.png 1638w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Kun vertaamme selaimen näyttämää sivua ja pyynnön palauttamaa HTML-koodia, huomaamme, että koodi ei sisällä ollenkaan muistiinpanoja sisältävää listaa.</p>\n<p>HTML-koodin <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/head\">head</a>-osio sisältää <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script\">script</a>-tagin, jonka ansiosta selain lataa <i>main.js</i>-nimisen JavaScript-tiedoston palvelimelta.</p>\n<p>Ladattu JavaScript-koodi näyttää seuraavalta:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\n    ul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span>\n\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n      ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n      li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Koodin yksityiskohdat eivät ole tässä osassa oleellisia, koodia on kuitenkin liitetty mukaan tekstin ja kuvien mausteeksi. Pääsemme kunnolla koodin pariin vasta <a href=\"/osa1\">osassa 1</a>. Tämän osan esimerkkisovelluksen koodi ei itse asiassa ole ollenkaan relevanttia kurssilla käytettävien ohjelmointitekniikoiden kannalta.</p>\n<blockquote>\n<p>Joku saattaa ihmetellä, miksi käytössä on xhttp-olio eikä modernimpi fetch. Syynä on se, että tässä osassa ei haluta mennä ollenkaan promiseihin ja koodin rooli esimerkissä on muutenkin sekundäärinen. Palaamme <a href=\"/osa2\">osassa 2</a> uudenaikaisempiin tapoihin tehdä pyyntöjä palvelimelle.</p>\n</blockquote>\n<p>Heti ladattuaan <i>script</i>-tagin sisältämän JavaScriptin selain suorittaa koodin.</p>\n<p>Kaksi viimeistä riviä määrittelevät, että selain tekee GET-tyyppisen HTTP-pyynnön palvelimen osoitteeseen <i>/data.json</i>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Kyseessä on alin Network-välilehden näyttämistä selaimen tekemistä pyynnöistä.</p>\n<p>Voimme kokeilla mennä osoitteeseen <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a> suoraan selaimella:</p>\n<picture><img src=\"/static/cb83e4c1c89fd4bc662942457f30403e/5a190/10e.png\" srcset=\"/static/cb83e4c1c89fd4bc662942457f30403e/772e8/10e.png 200w,\n/static/cb83e4c1c89fd4bc662942457f30403e/e17e5/10e.png 400w,\n/static/cb83e4c1c89fd4bc662942457f30403e/5a190/10e.png 800w,\n/static/cb83e4c1c89fd4bc662942457f30403e/c1b63/10e.png 1200w,\n/static/cb83e4c1c89fd4bc662942457f30403e/29007/10e.png 1600w,\n/static/cb83e4c1c89fd4bc662942457f30403e/3a1b1/10e.png 1686w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Osoitteesta löytyvät muistiinpanot <a href=\"https://en.wikipedia.org/wiki/JSON\">JSON</a>-muotoisena \"raakadatana\". Oletusarvoisesti selain ei osaa näyttää JSON-dataa kovin hyvin, mutta on olemassa lukuisia plugineja, jotka hoitavat muotoilun. Asenna nyt Chromeen esim. <a href=\"https://chrome.google.com/webstore/detail/jsonview/gmegofmjomhknnokphhckolhcffdaihd\">JSONView</a> ja lataa sivu uudelleen. Data on nyt miellyttävämmin muotoiltua:</p>\n<picture><img src=\"/static/fd335c19a19f2176040834b7c5533193/5a190/11e.png\" srcset=\"/static/fd335c19a19f2176040834b7c5533193/772e8/11e.png 200w,\n/static/fd335c19a19f2176040834b7c5533193/e17e5/11e.png 400w,\n/static/fd335c19a19f2176040834b7c5533193/5a190/11e.png 800w,\n/static/fd335c19a19f2176040834b7c5533193/c1b63/11e.png 1200w,\n/static/fd335c19a19f2176040834b7c5533193/5dded/11e.png 1588w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Yllä oleva muistiinpanojen sivun JavaScript-koodi siis lataa muistiinpanot sisältävän JSON-muotoisen datan ja muodostaa datan avulla selaimeen \"bullet-listan\" muistiinpanojen sisällöstä:</p>\n<p>Tämän saa aikaan seuraava koodi:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\nul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span>\n\ndata<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Koodi muodostaa ensin järjestämätöntä listaa edustavan <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ul\">ul</a>-tagin:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\nul<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ja lisää ul:n sisään yhden <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li\">li</a>-elementin kutakin muistiinpanoa kohti. Ainoastaan muistiinpanon <i>content</i>-kenttä tulee li-elementin sisällöksi. Raakadatassa olevia aikaleimoja ei käytetä mihinkään.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Avaa nyt konsolin <i>Console</i>-välilehti:</p>\n<picture><img src=\"/static/7b61ba46a7734400891ed78cf57011cb/5a190/12e.png\" srcset=\"/static/7b61ba46a7734400891ed78cf57011cb/772e8/12e.png 200w,\n/static/7b61ba46a7734400891ed78cf57011cb/e17e5/12e.png 400w,\n/static/7b61ba46a7734400891ed78cf57011cb/5a190/12e.png 800w,\n/static/7b61ba46a7734400891ed78cf57011cb/c1b63/12e.png 1200w,\n/static/7b61ba46a7734400891ed78cf57011cb/ae28e/12e.png 1598w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Painamalla rivin alussa olevaa kolmiota saat laajennettua konsolissa olevan rivin:</p>\n<picture><img src=\"/static/b6c827a56505ac8a9243162a448ada21/5a190/13e.png\" srcset=\"/static/b6c827a56505ac8a9243162a448ada21/772e8/13e.png 200w,\n/static/b6c827a56505ac8a9243162a448ada21/e17e5/13e.png 400w,\n/static/b6c827a56505ac8a9243162a448ada21/5a190/13e.png 800w,\n/static/b6c827a56505ac8a9243162a448ada21/c1b63/13e.png 1200w,\n/static/b6c827a56505ac8a9243162a448ada21/ddb6a/13e.png 1592w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Konsoliin ilmestynyt tulostus johtuu siitä, että koodiin oli lisätty komento <em>console.log</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></code></pre></div>\n<p>eli vastaanotettuaan datan palvelimelta koodi tulostaa datan konsoliin.</p>\n<p>Konsolin välilehti <i>Console</i> sekä komento <em>console.log</em> tulevat varmasti erittäin tutuiksi kurssin edetessä.</p>\n<h3>Tapahtumankäsittelijä ja takaisinkutsu</h3>\n<p>Koodin rakenne on hieman erikoinen:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// koodi, joka käsittelee palvelimen vastauksen</span>\n<span class=\"token punctuation\">}</span>\n\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\nxhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>eli palvelimelle tehtävä pyyntö suoritetaan vasta viimeisellä rivillä. Palvelimen vastauksen käsittelyn määrittelevä koodi on kirjoitettu jo aiemmin. Mistä on kyse?</p>\n<p>Rivillä</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></code></pre></div>\n<p>kyselyn tekevään <em>xhttp</em>-olioon määritellään <i>tapahtumankäsittelijä</i> (event handler) tilanteelle <i>onreadystatechange</i>. Kun kyselyn tekevän olion tila muuttuu, kutsuu selain tapahtumankäsittelijänä olevaa funktiota. Funktion koodi tarkastaa, että <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\">readyState</a>:n arvo on <i>4</i> (joka kuvaa tilannetta <i>The operation is complete</i>) ja että vastauksen HTTP-statuskoodi on onnistumisesta kertova <i>200</i>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">xhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// koodi, joka käsittelee palvelimen vastauksen</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tapahtumankäsittelijöihin liittyvä mekanismi koodin suorittamiseen on JavaScriptissä erittäin yleistä. Tapahtumankäsittelijöinä olevia JavaScript-funktioita kutsutaan <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Callback_function\">callback</a>- eli takaisinkutsufunktioiksi, sillä sovelluksen koodi ei kutsu niitä itse vaan suoritusympäristö. Web-selain suorittaa funktion kutsumisen sopivana ajankohtana eli kyseisen <i>tapahtuman</i> tapahduttua.</p>\n<h3>Document Object Model eli DOM</h3>\n<p>Voimme ajatella, että HTML-sivut muodostavat implisiittisen puurakenteen</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">html\n  head\n    link\n    script\n  body\n    div\n      h1\n      div\n        ul\n          li\n          li\n          li\n      form\n        input\n        input</code></pre></div>\n<p>Sama puumaisuus on nähtävissä konsolin välilehdellä </i>Elements</i>:</p>\n<picture><img src=\"/static/081eb2d1f52d2536382d5d3efe0bc87f/5a190/14e.png\" srcset=\"/static/081eb2d1f52d2536382d5d3efe0bc87f/772e8/14e.png 200w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/e17e5/14e.png 400w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/5a190/14e.png 800w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/c1b63/14e.png 1200w,\n/static/081eb2d1f52d2536382d5d3efe0bc87f/2cefc/14e.png 1400w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Selainten toiminta perustuukin ideaan esittää HTML-elementit puurakenteena.</p>\n<p>Document Object Model eli <a href=\"https://en.wikipedia.org/wiki/Document_Object_Model\">DOM</a> on ohjelmointirajapinta eli <i>API</i>, joka mahdollistaa selaimessa esitettävien web-sivuja vastaavien <i>elementtipuiden</i> muokkaamisen ohjelmallisesti.</p>\n<p>Edellisessä luvussa esittelemämme JavaScript-koodi käytti nimenomaan DOM-apia lisätäkseen sivulle muistiinpanojen listan.</p>\n<p>Alla oleva koodi luo muuttujaan <em>ul</em> DOM-apin avulla uuden \"solmun\" ja lisää sille joukon lapsisolmuja:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ul <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span>\n\ndata<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n  ul<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span>\n  li<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>lopulta muuttujassa <em>ul</em> oleva puun palanen yhdistetään sopivaan paikkaan koko sovelluksen HTML-koodia edustavassa puussa:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ul<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>document-olio ja sivun manipulointi konsolista</h3>\n<p>HTML-dokumenttia esittävän DOM-puun ylimpänä solmuna on olio nimeltään <em>document</em>. Olioon pääsee käsiksi Console-välilehdeltä (kirjoita sana <i>document</i> konsoliin ja paina enter):</p>\n<picture><img src=\"/static/ac9364f4d597d187d271a1628a332e7d/5a190/15e.png\" srcset=\"/static/ac9364f4d597d187d271a1628a332e7d/772e8/15e.png 200w,\n/static/ac9364f4d597d187d271a1628a332e7d/e17e5/15e.png 400w,\n/static/ac9364f4d597d187d271a1628a332e7d/5a190/15e.png 800w,\n/static/ac9364f4d597d187d271a1628a332e7d/c1b63/15e.png 1200w,\n/static/ac9364f4d597d187d271a1628a332e7d/71c1d/15e.png 1536w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Voimme suorittaa konsolista käsin DOM-apin avulla erilaisia operaatioita selaimessa näytettävälle web-sivulle hyödyntämällä <em>document</em>-olioa.</p>\n<p>Lisätään nyt sivulle uusi muistiinpano suoraan konsolista.</p>\n<p>Haetaan ensin sivulta muistiinpanojen lista eli sivun ul-elementeistä ensimmäinen:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">list <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>luodaan uusi li-elementti ja lisätään sille sopiva tekstisisältö:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">newElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\nnewElement<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Page manipulation from console is easy'</span></code></pre></div>\n<p>liitetään li-elementti listalle:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">list<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>newElement<span class=\"token punctuation\">)</span></code></pre></div>\n<picture><img src=\"/static/5971f5573de2bc91961f679e27430097/5a190/16e.png\" srcset=\"/static/5971f5573de2bc91961f679e27430097/772e8/16e.png 200w,\n/static/5971f5573de2bc91961f679e27430097/e17e5/16e.png 400w,\n/static/5971f5573de2bc91961f679e27430097/5a190/16e.png 800w,\n/static/5971f5573de2bc91961f679e27430097/c1b63/16e.png 1200w,\n/static/5971f5573de2bc91961f679e27430097/35890/16e.png 1582w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Vaikka selaimen näyttämä sivu päivittyy, muutos ei ole lopullinen. Jos sivu ladataan uudelleen, uusi muistiinpano katoaa, sillä muutos ei mennyt palvelimelle asti. Selaimen lataama JavaScript luo muistiinpanojen listan aina palvelimelta osoitteesta <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a> haettavan JSON-muotoisen raakadatan perusteella.</p>\n<h3>CSS</h3>\n<p>Muistiinpanojen sivun HTML-koodin <i>head</i>-osio sisältää <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link\">link</a>-tagin, joka määrittelee, että selaimen tulee ladata palvelimelta osoitteesta <a href=\"https://studies.cs.helsinki.fi/exampleapp/main.css\">main.css</a> sivulla käytettävä <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS\">CSS</a>-tyylitiedosto.</p>\n<p>Cascading Style Sheets eli CSS on kieli, jonka avulla web-sovellusten ulkoasu määritellään.</p>\n<p>Ladattu CSS-tiedosto näyttää seuraavalta:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.notes</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tiedosto määrittelee kaksi <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Class_selectors\">luokkaselektoria</a>, joiden avulla valitaan tietty sivun alue ja määritellään alueelle sovellettavat tyylisäännöt.</p>\n<p>Luokkaselektori alkaa aina pisteellä ja sisältää luokan nimen.</p>\n<p>Luokat ovat <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class\">attribuutteja</a>, joita voidaan liittää HTML-elementeille.</p>\n<p>Konsolin <i>Elements</i>-välilehti mahdollistaa class-attribuuttien tarkastelun:</p>\n<picture><img src=\"/static/4504fc2e95de826dd766aca1d0940ea4/5a190/17e.png\" srcset=\"/static/4504fc2e95de826dd766aca1d0940ea4/772e8/17e.png 200w,\n/static/4504fc2e95de826dd766aca1d0940ea4/e17e5/17e.png 400w,\n/static/4504fc2e95de826dd766aca1d0940ea4/5a190/17e.png 800w,\n/static/4504fc2e95de826dd766aca1d0940ea4/c1b63/17e.png 1200w,\n/static/4504fc2e95de826dd766aca1d0940ea4/29007/17e.png 1600w,\n/static/4504fc2e95de826dd766aca1d0940ea4/f349c/17e.png 2002w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>sovelluksen uloimmalle <i>div</i>-elementille on siis liitetty luokka <i>container</i>. Muistiinpanojen listan sisältävä <i>ul</i>-elementin sisällä oleva lista sisältää luokan <i>notes</i>.</p>\n<p>CSS-säännön avulla on määritelty, että <i>container</i>-luokan sisältävä elementti ympäröidään yhden pikselin paksuisella <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/border\">border</a>:illa. Elementille asetetaan myös 10 pikselin <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/padding\">padding</a>, jonka ansiosta elementin sisällön ja elementin ulkorajan väliin jätetään hieman tilaa.</p>\n<p>Toinen määritelty CSS-sääntö asettaa muistiinpanojen kirjainten värin siniseksi.</p>\n<p>HTML-elementeillä on muitakin attribuutteja kuin luokkia. Muistiinpanot sisältävä <i>div</i>-elementti sisältää <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id\">id</a>-attribuutin. JavaScript-koodi hyödyntää attribuuttia elementin etsimiseen.</p>\n<p>Konsolin <i>Elements</i>-välilehdellä on mahdollista manipuloida elementtien tyylejä:</p>\n<picture><img src=\"/static/ef664dbcddaeef64c5ff6e180e42e5ca/5a190/18e.png\" srcset=\"/static/ef664dbcddaeef64c5ff6e180e42e5ca/772e8/18e.png 200w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/e17e5/18e.png 400w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/5a190/18e.png 800w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/c1b63/18e.png 1200w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/29007/18e.png 1600w,\n/static/ef664dbcddaeef64c5ff6e180e42e5ca/3d22e/18e.png 2010w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Tehdyt muutokset eivät luonnollisesti jää voimaan, kun selaimen sivu uudelleenladataan, eli jos muutokset halutaan pysyviksi, tulee ne konsolissa tehtävien kokeilujen jälkeen tallettaa palvelimella olevaan tyylitiedostoon.</p>\n<h3>JavaScriptia sisältävän sivun lataaminen - kertaus</h3>\n<p>Kerrataan vielä, mitä tapahtuu, kun selaimessa avataan sivu <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a></p>\n<picture><img src=\"/static/15a8e6a030a5d6b3d2b4b459c3f2f10f/5a190/19m.png\" srcset=\"/static/15a8e6a030a5d6b3d2b4b459c3f2f10f/772e8/19m.png 200w,\n/static/15a8e6a030a5d6b3d2b4b459c3f2f10f/e17e5/19m.png 400w,\n/static/15a8e6a030a5d6b3d2b4b459c3f2f10f/5a190/19m.png 800w,\n/static/15a8e6a030a5d6b3d2b4b459c3f2f10f/c1b63/19m.png 1200w,\n/static/15a8e6a030a5d6b3d2b4b459c3f2f10f/098c1/19m.png 1578w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<ul>\n<li>selain hakee palvelimelta sivun sisällön ja rakenteen määrittelevän HTML-koodin HTTP GET ‑pyynnöllä</li>\n<li>HTML-koodi saa aikaan sen, että selain hakee sivun tyylit määrittelevän tiedoston <i>main.css</i></li>\n<li>sekä JavaScript-koodia sisältävän tiedoston <i>main.js</i></li>\n<li>selain alkaa suorittamaan hakemaansa JavaScript-koodia, joka tekee HTTP GET ‑pyynnön osoitteeseen <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a>, josta muistiinpanot palautetaan JSON-muotoisena raakadatana</li>\n<li>datan saapuessa selain suorittaa <em>tapahtumankäsittelijän</em>, joka renderöi muistiinpanot ruudulle käyttäen DOM-apia</li>\n</ul>\n<h3>Lomake ja HTTP POST</h3>\n<p>Tutkitaan seuraavaksi sitä, miten uusien muistiinpanojen luominen tapahtuu. Tätä varten muistiinpanojen sivu sisältää lomakkeen eli <a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form\">form-elementin</a>.</p>\n<picture><img src=\"/static/2dbe9f6d3c9999766d2cbad6200fea40/5a190/20e.png\" srcset=\"/static/2dbe9f6d3c9999766d2cbad6200fea40/772e8/20e.png 200w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/e17e5/20e.png 400w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/5a190/20e.png 800w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/c1b63/20e.png 1200w,\n/static/2dbe9f6d3c9999766d2cbad6200fea40/c8ad9/20e.png 1564w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Kun lomakkeen painiketta painetaan, lähettää selain lomakkeelle syötetyn datan palvelimelle. Avataan <i>Network</i>-välilehti ja katsotaan, miltä lomakkeen lähettäminen näyttää:</p>\n<picture><img src=\"/static/7951d2221d80f63a78350106150d5e61/5a190/21e.png\" srcset=\"/static/7951d2221d80f63a78350106150d5e61/772e8/21e.png 200w,\n/static/7951d2221d80f63a78350106150d5e61/e17e5/21e.png 400w,\n/static/7951d2221d80f63a78350106150d5e61/5a190/21e.png 800w,\n/static/7951d2221d80f63a78350106150d5e61/c1b63/21e.png 1200w,\n/static/7951d2221d80f63a78350106150d5e61/c655d/21e.png 1586w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Lomakkeen lähettäminen aiheuttaa yllättäen yhteensä <i>viisi</i> HTTP-pyyntöä. Näistä ensimmäinen vastaa lomakkeen lähetystapahtumaa. Tarkennetaan siihen:</p>\n<picture><img src=\"/static/ac09c143991ad160bdaa1c1381d93f7b/5a190/22e.png\" srcset=\"/static/ac09c143991ad160bdaa1c1381d93f7b/772e8/22e.png 200w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/e17e5/22e.png 400w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/5a190/22e.png 800w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/c1b63/22e.png 1200w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/29007/22e.png 1600w,\n/static/ac09c143991ad160bdaa1c1381d93f7b/8adb9/22e.png 1638w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Kyseessä on siis <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST\">HTTP POST</a> ‑pyyntö, ja se on tehty palvelimen osoitteeseen <i>new_note</i>. Palvelin vastaa pyyntöön HTTP-statuskoodilla 302. Kyseessä on ns. <a href=\"https://en.wikipedia.org/wiki/URL_redirection\">uudelleenohjauspyyntö</a> eli redirectaus, jonka avulla palvelin kehottaa selainta tekemään automaattisesti uuden HTTP GET ‑pyynnön headerin <i>Location</i> viittaamaan paikkaan eli osoitteeseen <i>notes</i>.</p>\n<p>Selain siis lataa uudelleen muistiinpanojen sivun. Sivunlataus saa aikaan myös kolme muuta HTTP-pyyntöä: tyylitiedoston (<i>main.css</i>), JavaScript-koodin (<i>main.js</i>) ja muistiinpanojen raakadatan (<i>data.json</i>) lataamisen.</p>\n<p>Network-välilehdeltä on mahdollista tarkastella pyynnön mukana lähetettyä dataa. Datan saa näkyviin valitsemalla ensin pyynnön nimen ja tarkastelemalla sitten Payload-välilehteä:</p>\n<picture><img src=\"/static/db8ee5a0d325d07f5c74562fdfa7b945/5a190/23g.png\" alt=\"Pyynnön Payloadin tarkasteleminen Network-välilehdeltä\" srcset=\"/static/db8ee5a0d325d07f5c74562fdfa7b945/772e8/23g.png 200w,\n/static/db8ee5a0d325d07f5c74562fdfa7b945/e17e5/23g.png 400w,\n/static/db8ee5a0d325d07f5c74562fdfa7b945/5a190/23g.png 800w,\n/static/db8ee5a0d325d07f5c74562fdfa7b945/5b481/23g.png 846w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Lomakkeen lähettäminen tapahtuu HTTP POST ‑pyyntönä ja osoitteeseen <i>new_note</i> form-tagiin määriteltyjen attribuuttien <i>action</i> ja <i>method</i> ansiosta:</p>\n<picture><img src=\"/static/9463d1dca4170015c47e79065ff98820/5a190/24e.png\" srcset=\"/static/9463d1dca4170015c47e79065ff98820/772e8/24e.png 200w,\n/static/9463d1dca4170015c47e79065ff98820/e17e5/24e.png 400w,\n/static/9463d1dca4170015c47e79065ff98820/5a190/24e.png 800w,\n/static/9463d1dca4170015c47e79065ff98820/c1b63/24e.png 1200w,\n/static/9463d1dca4170015c47e79065ff98820/07a9c/24e.png 1440w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>POST-pyynnöstä huolehtiva palvelimen koodi on yksinkertainen (huom: tämä koodi on siis palvelimella eikä näy selaimen lataamassa JavaScript-tiedostossa):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/new_note'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>note<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/notes'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>POST-pyyntöihin liitettävä data lähetetään pyynnön mukana \"runkona\" eli <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST\">bodynä</a>. Palvelin saa POST-pyynnön datan pyytämällä sitä pyyntöä vastaavan olion <em>req</em> kentästä <em>req.body</em>.</p>\n<p>Tekstikenttään kirjoitettu data on kentässä <i>note</i>, eli palvelin viittaa siihen <em>req.body.note</em>.</p>\n<p>Palvelin luo uutta muistiinpanoa vastaavan olion ja laittaa sen muistiinpanot sisältävään taulukkoon nimeltä <em>notes</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>note<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Muistiinpano-olioilla on siis kaksi kenttää: varsinaisen sisällön kuvaava <i>content</i> ja luomishetken kertova <i>date</i>.</p>\n<p>Palvelin ei talleta muistiinpanoja tietokantaan, joten uudet muistiinpanot katoavat aina, kun palvelin käynnistetään uudelleen.</p>\n<h3>AJAX</h3>\n<p>Sovelluksen muistiinpanojen sivu noudattaa vuosituhannen alun tyyliä, ja se \"käyttää AJAX:ia\" eli on silloisen kehityksen aallonharjalla.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\">AJAX</a> (Asynchronous JavaScript and XML) on termi, joka lanseerattiin vuoden 2005 helmikuussa kuvaamaan selainten kehityksen mahdollistamaa vallankumouksellista tapaa, jossa HTML-sivulle sisällytetyn JavaScriptin avulla oli mahdollista ladata sivulle lisää sisältöä lataamatta itse sivua uudelleen.</p>\n<p>Ennen AJAX:in aikakautta jokainen sivu toimi aiemmassa luvussa olevan <a href=\"/osa0/web_sovelluksen_toimintaperiaatteita#perinteinen-web-sovellus\">perinteisen web-sovelluksen</a> tapaan eli yleisesti ottaen kaikki sivuilla näytettävä data tuli palvelimen generoimasta HTML-koodista.</p>\n<p>Muistiinpanojen sivu siis lataa näytettävän datan AJAX:illa. Lomakkeen lähetys sen sijaan tapahtuu perinteisen web-lomakkeen lähetysmekanismin kautta.</p>\n<p>Sovelluksen urlit heijastavat vanhaa, huoletonta aikaa. JSON-muotoinen data haetaan urlista <a href=\"https://studies.cs.helsinki.fi/exampleapp/data.json\">https://studies.cs.helsinki.fi/exampleapp/data.json</a>, ja uuden muistiinpanon tiedot lähetetään urliin <a href=\"https://studies.cs.helsinki.fi/exampleapp/new_note\">https://studies.cs.helsinki.fi/exampleapp/new_note</a>. Nykyään näin valittuja urleja ei pidetä ollenkaan hyvinä – ne eivät noudata ns. <a href=\"https://en.wikipedia.org/wiki/REST#Applied_to_web_services\">RESTful</a>-apien yleisesti hyväksyttyjä konventioita. Käsittelemme asiaa tarkemmin <a href=\"/osa3\">osassa 3</a>.</p>\n<p>AJAXiksi kutsuttu asia on arkipäiväistynyt ja muuttunut itsestäänselvyydeksi. Koko termi on hiipunut unholaan, ja nuori polvi ei ole sitä edes ikinä kuullut.</p>\n<h3>Single Page App</h3>\n<p>Esimerkkisovelluksemme pääsivu toimii perinteisten web-sivujen tapaan: kaikki sovelluslogiikka on palvelimella, ja selain ainoastaan renderöi palvelimen lähettämää HTML-koodia.</p>\n<p>Muistiinpanoista huolehtivassa sivussa osa sovelluslogiikasta eli olemassaolevien muistiinpanojen HTML-koodin generointi on siirretty selaimen vastuulle. Selain hoitaa tehtävän suorittamalla palvelimelta lataamansa JavaScript-koodin. Selaimessa suoritettava koodi hakee ensin muistiinpanot palvelimelta JSON-muotoisena raakadatana ja lisää sivulle muistiinpanoja edustavat HTML-elementit <a href=\"/osa0/web_sovelluksen_toimintaperiaatteita#document-object-model-eli-dom\">DOM-apia</a> hyödyntäen.\nViime vuosien aikana on noussut esiin tyyli tehdä web-sovelluksia käyttäen <a href=\"https://en.wikipedia.org/wiki/Single-page_application\">Single-page application</a> (SPA) ‑tyyliä, jossa sovelluksilla ei enää ole esimerkkisovelluksemme tapaan erillisiä, palvelimen sille lähettämiä sivuja, vaan sovellus koostuu ainoastaan yhdestä palvelimen lähettämästä HTML-sivusta, jonka sisältöä manipuloidaan selaimessa suoritettavalla JavaScriptillä.</p>\n<p>Sovelluksemme muistiinpanosivu muistuttaa jo hiukan SPA-tyylistä sovellusta. Sitä se ei kuitenkaan vielä ole, sillä vaikka muistiinpanojen renderöintilogiikka on toteutettu selaimessa, käyttää sivu vielä perinteistä mekanismia uusien muistiinpanojen luomiseen, eli se lähettää uuden muistiinpanon tiedot lomakkeen avulla ja palvelin pyytää <i>uudelleenohjauksen</i> avulla selainta lataamaan muistiinpanojen sivun uudelleen.</p>\n<p>Osoitteessa <a href=\"https://studies.cs.helsinki.fi/exampleapp/spa\">https://studies.cs.helsinki.fi/exampleapp/spa</a> on sovelluksen Single Page App ‑versio.</p>\n<p>Sovellus näyttää ensivilkaisulta täsmälleen samalta kuin edellinen versio.</p>\n<p>HTML-koodi on lähes samanlainen. Erona on ladattava JavaScript-tiedosto (<i>spa.js</i>) ja pieni muutos form-tagin määrittelyssä:</p>\n<picture><img src=\"/static/cb1893b2f18168168b3337ef994f0347/5a190/25e.png\" srcset=\"/static/cb1893b2f18168168b3337ef994f0347/772e8/25e.png 200w,\n/static/cb1893b2f18168168b3337ef994f0347/e17e5/25e.png 400w,\n/static/cb1893b2f18168168b3337ef994f0347/5a190/25e.png 800w,\n/static/cb1893b2f18168168b3337ef994f0347/c1b63/25e.png 1200w,\n/static/cb1893b2f18168168b3337ef994f0347/35890/25e.png 1582w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Lomakkeelle ei ole nyt määritelty ollenkaan <i>action</i>- eikä <i>method</i>-attribuutteja, jotka määrittävät, minne ja miten selain lähettää lomakkeelle syötetyn datan.</p>\n<p>Avaa nyt <i>Network</i>-välilehti ja tyhjennä se ⦸-symbolilla. Kun luot uuden muistiinpanon, huomaat, että selain lähettää ainoastaan yhden pyynnön palvelimelle:</p>\n<picture><img src=\"/static/07beb53097a520517c1c28ff17fc907a/5a190/26e.png\" srcset=\"/static/07beb53097a520517c1c28ff17fc907a/772e8/26e.png 200w,\n/static/07beb53097a520517c1c28ff17fc907a/e17e5/26e.png 400w,\n/static/07beb53097a520517c1c28ff17fc907a/5a190/26e.png 800w,\n/static/07beb53097a520517c1c28ff17fc907a/c1b63/26e.png 1200w,\n/static/07beb53097a520517c1c28ff17fc907a/29007/26e.png 1600w,\n/static/07beb53097a520517c1c28ff17fc907a/fb937/26e.png 1820w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Pyyntö kohdistuu osoitteeseen <i>new_note_spa</i>, on tyypiltään POST ja se sisältää JSON-muodossa olevan uuden muistiinpanon, johon kuuluu sekä sisältö (<i>content</i>) että aikaleima (<i>date</i>):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Single Page App ei tee turhia sivunlatauksia\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2019-01-03T15:11:22.123Z\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Pyyntöön liitetty headeri <i>Content-Type</i> kertoo palvelimelle, että pyynnön mukana tuleva data on JSON-muotoista:</p>\n<picture><img src=\"/static/5819436c98e4cce143fce3fe9bc534b9/5a190/27e.png\" srcset=\"/static/5819436c98e4cce143fce3fe9bc534b9/772e8/27e.png 200w,\n/static/5819436c98e4cce143fce3fe9bc534b9/e17e5/27e.png 400w,\n/static/5819436c98e4cce143fce3fe9bc534b9/5a190/27e.png 800w,\n/static/5819436c98e4cce143fce3fe9bc534b9/c1b63/27e.png 1200w,\n/static/5819436c98e4cce143fce3fe9bc534b9/29007/27e.png 1600w,\n/static/5819436c98e4cce143fce3fe9bc534b9/ab40b/27e.png 1736w\" sizes=\"(max-width: 800px) 100vw, 800px\"></picture>\n<p>Ilman headeria palvelin ei osaisi parsia pyynnön mukana tulevaa dataa oikein.</p>\n<p>Palvelin vastaa kyselyyn statuskoodilla <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201\">201 created</a>. Tällä kertaa palvelin ei pyydä uudelleenohjausta kuten aiemmassa versiossamme. Selain pysyy samalla sivulla, ja muita HTTP-pyyntöjä ei suoriteta.</p>\n<p>Ohjelman Single Page App ‑versiossa lomakkeen tietoja ei lähetetä selaimen normaalin lomakkeiden lähetysmekanismin avulla. Lähettämisen hoitaa selaimen lataamassa JavaScript-tiedostossa määritelty koodi. Katsotaan hieman koodia, vaikka yksityiskohdista ei tarvitse nytkään välittää liikaa.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> form <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'notes_form'</span><span class=\"token punctuation\">)</span>\nform<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsubmit</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">var</span> note <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  notes<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span>\n  e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>elements<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n  <span class=\"token function\">redrawNotes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">sendToServer</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Komennolla <em>document.getElementById('notes_form')</em> koodi hakee sivulta lomake-elementin ja rekisteröi sille <i>tapahtumankäsittelijän</i> hoitamaan tilanteen, jossa lomake \"submitoidaan\" eli lähetetään. Tapahtumankäsittelijä kutsuu heti metodia <em>e.preventDefault()</em>, jolla se estää lomakkeen lähetyksen oletusarvoisen toiminnan. Oletusarvoinen toiminta aiheuttaisi lomakkeen lähettämisen ja sivun uudelleen lataamisen, joita emme single page ‑sovelluksissa halua tapahtuvan.</p>\n<p>Tämän jälkeen koodi luo muistiinpanon, lisää sen muistiinpanojen listalle komennolla <em>notes.push(note)</em>, piirtää ruudun sisällön eli muistiinpanojen listan uudelleen ja lähettää uuden muistiinpanon palvelimelle.</p>\n<p>Palvelimelle muistiinpanon lähettävä koodi on seuraava:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">sendToServer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">note</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> xhttpForPost <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// ...</span>\n\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/new_note_spa'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'Content-type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'application/json'</span>\n  <span class=\"token punctuation\">)</span>\n  xhttpForPost<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>note<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Koodissa siis määritellään, että kyse on HTTP POST ‑pyynnöstä, että headerin <i>Content-type</i> avulla lähetettävän datan tyyppi on JSON ja että data lähetetään JSON-merkkijonona.</p>\n<p>Sovelluksen koodi on osoitteessa <a href=\"https://github.com/mluukkai/example_app\">https://github.com/mluukkai/example_app</a>. Kannattaa huomata, että sovellus on tarkoitettu ainoastaan kurssin käsitteistöä demonstroivaksi esimerkiksi. Koodi on osin tyyliltään huonoa, ja siitä ei tule ottaa mallia omia sovelluksia tehdessä. Sama koskee käytettyjä urleja, Single Page App ‑tyyliä noudattavan sivun käyttämä uusien muistiinpanojen kohdeosoite <i>new_note_spa</i> ei noudata nykyisin suositeltavia käytäntöjä.</p>\n<h3>JavaScript-kirjastot</h3>\n<p>Kurssin esimerkkisovellus on tehty ns. <a href=\"https://medium.freecodecamp.org/is-vanilla-javascript-worth-learning-absolutely-c2c67140ac34\">Vanilla JavaScriptillä</a> eli käyttäen pelkkää DOM-apia ja JavaScript-kieltä sivujen rakenteen manipulointiin.</p>\n<p>Pelkän JavaScriptin ja DOM-apin käytön sijaan web-ohjelmoinnissa hyödynnetään yleensä kirjastoja, jotka sisältävät DOM-apia helpommin käytettäviä työkaluja sivujen muokkaamiseen. Eräs tällainen kirjasto on edelleenkin hyvin suosittu <a href=\"https://jquery.com/\">jQuery</a>.</p>\n<p>jQuery on kehitetty aikana, jona web-sivut olivat vielä suurimmaksi osaksi perinteisiä, eli palvelin muodosti HTML-sivuja, joiden toiminnallisuutta rikastettiin selaimessa jQueryllä kirjoitetun JavaScript-koodin avulla. Yksi syy jQueryn suosion taustalla oli niin sanottu cross-browser yhteensopivuus, eli kirjasto toimi selaimesta ja selainvalmistajasta riippumatta samalla tavalla, eikä sitä käytettäessä ollut enää tarvetta kirjoittaa selainversiokohtaisia ratkaisuja. Nykyisin tavallisen jQueryn käyttö ei ole enää yhtä perusteltua kuin aikaisemmin – JavaScript on kehittynyt paljon, ja käytetyimmät selaimet tukevat perustoiminnallisuuksia yleisesti ottaen hyvin.</p>\n<p>Single page app ‑tyylin noustua suosioon on ilmestynyt useita jQueryä \"modernimpia\" tapoja sovellusten kehittämiseen. Ensimmäisen trendiaallon suosikki oli <a href=\"http://backbonejs.org/\">Backbone.js</a>. Googlen kehittämä <a href=\"https://angularjs.org/\">AngularJS</a> nousi 2012 tapahtuneen <a href=\"https://github.com/angular/angular.js/blob/master/CHANGELOG.md#100-temporal-domination-2012-06-13\">julkaisun</a> jälkeen erittäin nopeasti lähes <i>de facto</i> ‑standardin asemaan modernissa web-sovelluskehityksessä.</p>\n<p>Angularin suosio kuitenkin romahti siinä vaiheessa, kun Angular-tiimi ilmoitti lokakuussa 2014, että version 1 kehitys lopetetaan ja Angular 2 ei tule olemaan taaksepäin yhteensopiva ykkösversion kanssa. Angular 2 ja uudemmat versiot eivät ole saaneet kovin innostunutta vastaanottoa mutta ovat kohtuullisen laajalti käytettyjä.</p>\n<p>Nykyisin, tai oikeastaan jo lähes puolen vuosikymmenen ajan, suosituin tapa toteuttaa web-sovellusten selainpuolen logiikka on Facebookin kehittämä <a href=\"https://react.dev/\">React</a>-kirjasto. Tulemme tutustumaan kurssin aikana Reactiin ja sen kanssa yleisesti käytettyyn <a href=\"https://github.com/reactjs/redux\">Redux</a>-kirjastoon.</p>\n<p>Reactin asema näyttää tällä hetkellä vahvalta, mutta JavaScript-maailma ei lepää koskaan. Muutama vuosi sitten hieman uudempi tulokas <a href=\"https://vuejs.org/\">Vue.js</a> herätti jossain määrin kiinnostusta, mutta ei sekään näytä nousseen uhkaamaan Reactin asemaa.</p>\n<h3>Full stack ‑websovelluskehitys</h3>\n<p>Mitä tarkoitetaan kurssin nimellä <i>Full stack ‑web-sovelluskehitys</i>? Full stack on hypenomainen termi – kaikki puhuvat siitä, mutta kukaan ei oikein tiedä, mitä se tarkoittaa, tai ainakaan mitään yhteneväistä määritelmää termille ei ole.</p>\n<p>Käytännössä kaikki web-sovellukset sisältävät (ainakin) kaksi \"kerrosta\". Ylin kerros on lähempänä loppukäyttäjää oleva selain, joka suorittaa JavaScript-koodin ja renderöi sovelluksen HTML:n. Alempi kerros taas on sivuston tiedostot sisältämä palvelin. Palvelimen alapuolella on usein vielä tietokanta. Näin websovelluksen <i>arkkitehtuurin</i> voi ajatella muodostavan pinon, englanniksi <i>stack</i>.</p>\n<p>Web-sovelluskehityksen yhteydessä puhutaan usein myös \"frontista\" (<a href=\"https://en.wikipedia.org/wiki/Front_and_back_ends\">frontend</a>) ja \"backistä\" (<a href=\"https://en.wikipedia.org/wiki/Front_and_back_ends\">backend</a>). Selain on frontend, ja selaimessa suoritettava JavaScript on frontend-koodia. Palvelimella taas pyörii backend-koodi.</p>\n<p>Tämän kurssin yhteydessä full stack ‑sovelluskehitys tarkoittaa sitä, että fokus on kaikissa sovelluksen osissa: niin frontendissä kuin backendissä sekä taustalla olevassa tietokannassa. Myös palvelimen käyttöjärjestelmä ja sen ohjelmistot lasketaan usein osaksi stackia. Niihin emme kuitenkaan tällä kurssilla puutu.</p>\n<p>Ohjelmoimme myös palvelinpuolta eli backendia JavaScriptilla käyttäen <a href=\"https://nodejs.org/en/\">Node.js</a>-suoritusympäristöä. Näin full stack ‑sovelluskehitys saa vielä uuden ulottuvuuden, kun voimme käyttää samaa ohjelmointikieltä pinon useammassa kerroksessa. Full stack ‑sovelluskehitys ei välttämättä edellytä sitä, että kaikissa \"sovelluspinon\" kerroksissa on käytössä sama kieli (JavaScript).</p>\n<p>Aiemmin on ollut yleisempää, että sovelluskehittäjät ovat erikoistuneet tiettyyn sovelluksen osaan, esim. backendiin. Tekniikat backendissa ja frontendissa ovat saattaneet olla hyvin erilaisia. Full stack ‑trendin myötä on tullut tavanomaiseksi, että sovelluskehittäjä hallitsee riittävästi kaikkia sovelluksen tasoja ja tietokantaa. Usein full stack ‑kehittäjällä on myös oltava riittävä määrä konfiguraatio- ja ylläpito-osaamista, jotta tämä pystyy operoimaan sovellustaan esim. pilvipalveluissa.</p>\n<h3>JavaScript fatigue</h3>\n<p>Full stack ‑sovelluskehitys on monella tapaa haastavaa. Asioita tapahtuu monessa paikassa ja mm. debuggaaminen on oleellisesti normaalia työpöytäsovellusta hankalampaa. JavaScript ei toimi aina niin kuin sen olettaisi toimivan (verrattuna moniin muihin kieliin), ja sen suoritusympäristöjen asynkroninen toimintamalli aiheuttaa monenlaisia haasteita. Verkon yli tapahtuva kommunikointi edellyttää HTTP-protokollan tuntemusta. On tunnettava myös tietokantoja ja hallittava palvelinten konfigurointia ja ylläpitoa. Toivottavaa olisi myös hallita riittävästi CSS:ää, jotta sovellukset saataisiin edes siedettävän näköisiksi.</p>\n<p>Oman haasteensa tuo vielä se, että JavaScript-maailma etenee koko ajan todella kovaa vauhtia eteenpäin. Kirjastot, työkalut ja itse kielikin ovat jatkuvan kehityksen alla. Osa alkaa kyllästyä nopeaan kehitykseen, ja sitä kuvaamaan on lanseerattu termi <a href=\"https://medium.com/@ericclemmons/javascript-fatigue-48d4011b6fc4\">JavaScript</a> <a href=\"https://auth0.com/blog/how-to-manage-javascript-fatigue/\">fatigue</a> eli <a href=\"https://hackernoon.com/how-it-feels-to-learn-javascript-in-2016-d3a717dd577f\">JavaScript</a>-väsymys.</p>\n<p>JavaScript-väsymys tulee varmasti iskemään myös tällä kurssilla. Onneksi nykyään on olemassa muutamia tapoja loiventaa oppimiskäyrää, ja voimme aloittaa keskittymällä konfiguraation sijaan koodaamiseen. Konfiguraatioita ei voi välttää, mutta seuraavat viikot voimme edetä iloisin mielin vailla pahimpia konfiguraatiohelvettejä.</p>\n</div>\n<div class=\"tasks\"> \n  <h3>Tehtäviä</h3>\n<p>Tehtävät palautetaan GitHubin kautta ja merkitsemällä tehdyt tehtävät <a href=\"https://studies.cs.helsinki.fi/stats/courses/fullstackopen\">palautussovellukseen</a>.</p>\n<p>Voit palauttaa kurssin kaikki tehtävät samaan repositorioon tai käyttää useita repositorioita. Jos palautat eri osien tehtäviä samaan repositorioon, käytä järkevää hakemistojen nimentää. Jos käytät yksityistä (private) repositoriota tehtävien palautukseen, liitä repositoriolle collaboratoriksi <i>mluukkai</i></p>\n<p>Eräs varsin toimiva hakemistorakenne palautusrepositoriolle on <a href=\"https://github.com/FullStack-HY/palauitusrepositorio\">tässä esimerkkirepositoriossa käytetty tapa</a>, jossa kutakin osaa kohti on oma hakemistonsa, joka vielä jakautuu tehtäväsarjat (kuten osan 1 unicafe) sisältäviin hakemistoihin:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">osa0\nosa1\n  kurssitiedot\n  unicafe\n  anekdootit\nosa2\n  puhelinluettelo\n  maiden_tiedot</code></pre></div>\n<p>Tehtävät palautetaan <strong>yksi osa kerrallaan</strong>. Kun olet palauttanut osan tehtävät, et voi enää palauttaa saman osan tekemättä jättämiäsi tehtäviä.</p>\n  <h4>0.1: HTML</h4>\n<p>Kertaa HTML:n perusteet lukemalla Mozillan tutoriaali <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics\">HTML:stä</a>.</p>\n<p><i>Tätä tehtävää ei palauteta GitHubiin. Riittää, että luet tutoriaalin.</i></p>\n  <h4>0.2: CSS</h4>\n<p>Kertaa CSS:n perusteet lukemalla Mozillan tutoriaali <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics\">CSS:stä</a>.</p>\n<p><i>Tätä tehtävää ei palauteta GitHubiin. Riittää, että luet tutoriaalin.</i></p>\n  <h4>0.3: HTML:n lomakkeet</h4>\n<p>Tutustu HTML:n lomakkeiden perusteisiin lukemalla Mozillan tutoriaali <a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Your_first_HTML_form\">Your first form</a>.</p>\n<p><i>Tätä tehtävää ei palauteta GitHubiin. Riittää, että luet tutoriaalin.</i></p>\n  <h4>0.4: uusi muistiinpano</h4>\n<p>Luvussa <a href=\"/osa0/web_sovelluksen_toimintaperiaatteita#java-scriptia-sisaltavan-sivun-lataaminen-kertaus\">JavaScriptia sisältävän sivun lataaminen - kertaus</a> kuvataan <a href=\"https://www.geeksforgeeks.org/unified-modeling-language-uml-sequence-diagrams/\">sekvenssikaavion</a>) avulla sivun <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> avaamisen aikaansaama tapahtumasarja.</p>\n<p>Kaavio on luotu GitHubiin Markdown-tiedostona hyödyntäen <a href=\"https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams\">Mermaid</a>-syntaksia seuraavasti:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sequenceDiagram\n    participant browser\n    participant server\n    \n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/notes\n    activate server\n    server-->>browser: HTML document\n    deactivate server\n    \n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/main.css\n    activate server\n    server-->>browser: the css file\n    deactivate server\n    \n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/main.js\n    activate server\n    server-->>browser: the JavaScript file\n    deactivate server\n    \n    Note right of browser: The browser starts executing the JavaScript code that fetches the JSON from the server\n    \n    browser->>server: GET https://studies.cs.helsinki.fi/exampleapp/data.json\n    activate server\n    server-->>browser: [{ \"content\": \"HTML is easy\", \"date\": \"2023-1-1\" }, ... ]\n    deactivate server    \n\n    Note right of browser: The browser executes the callback function that renders the notes </code></pre></div>\n<p><strong>Tee vastaavanlainen kaavio</strong>, joka kuvaa, mitä tapahtuu tilanteessa, jossa käyttäjä luo uuden muistiinpanon ollessaan sivulla <a href=\"https://studies.cs.helsinki.fi/exampleapp/notes\">https://studies.cs.helsinki.fi/exampleapp/notes</a> eli kirjoittaa tekstikenttään jotain ja painaa nappia <i>tallenna</i>.</p>\n<p>Kirjoita tarvittaessa palvelimella tai selaimessa tapahtuvat operaatiot sopivina kommentteina kaavion sekaan.</p>\n<p>Kaavion ei ole pakko olla sekvenssikaavio. Mikä tahansa järkevä kuvaustapa käy.</p>\n<p>Voit tehdä kaaviot millä ohjelmistolla haluat, mutta suositeltava tapa on tehdä ne suoraan GitHubiin Markdown- eli md-päätteisiksi tiedostoiksi käyttäen <a href=\"https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams\">Mermaid</a>-syntaksia.</p>\n<p>Kaikki oleellinen tieto tämän ja seuraavien kahden tehtävän tekemiseen on <a href=\"../osa0\">tässä osassa</a>. Näiden tehtävien ideana on, että luet tekstin vielä kerran ja mietit tarkkaan, mitä missäkin tapahtuu. Ohjelman <a href=\"https://github.com/mluukkai/example_app\">koodin</a> lukemista ei näissä tehtävissä edellytetä, vaikka sekin on toki mahdollista.</p>\n  <h4>0.5: Single Page App</h4>\n<p>Tee kaavio tilanteesta, jossa käyttäjä menee selaimella osoitteeseen <a href=\"https://studies.cs.helsinki.fi/exampleapp/spa\">https://studies.cs.helsinki.fi/exampleapp/spa</a> eli muistiinpanojen <a href=\"../osa0/web_sovelluksen_toimintaperiaatteita#single-page-app\">Single Page App</a>-versioon</p>\n  <h4>0.6: Uusi muistiinpano</h4>\n<p>Tee kaavio tilanteesta, jossa käyttäjä luo uuden muistiinpanon single page ‑versiossa.</p>\n<p>Tämä oli osan viimeinen tehtävä, ja on aika pushata vastaukset GitHubiin sekä merkata tehdyt tehtävät <a href=\"https://studies.cs.helsinki.fi/stats/courses/fullstackopen\">palautussovellukseen</a>.</p>\n</div>","frontmatter":{"mainImage":{"publicURL":"/static/b9999ec785b2c3bc6b8d3ef5d3537538/part-0.svg"},"part":0,"letter":"b","lang":"fi"}}},"pageContext":{"part":0,"letter":"b","lang":"fi"}},"staticQueryHashes":["3128451518"]}